<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password | SpotSync - INTI Campus Facilities</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Firebase SDK - Using the same version as other pages for consistency -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- Background Image Element -->
    <img src="assets/INTI_Background.jpg" alt="INTI Campus Background" class="background-image">
    
    <!-- Background Overlay -->
    <div class="background-overlay"></div>
    
    <div class="auth-page">
        <div class="login-container">
            <div class="login-header">
                <img src="assets/inti-logo.png" alt="INTI Logo" class="logo">
                <h1>Reset Password</h1>
                <p>Enter your Matrix ID to reset your password</p>
            </div>
            
            <form id="forgotPasswordForm" class="login-form">
                <div class="form-group">
                    <label for="matrixId">Matrix ID</label>
                    <input type="text" id="matrixId" placeholder="e.g. P12345678" required 
                           pattern="[Pp]{1}\d{8}" 
                           title="Format: P followed by 8 digits (e.g. P12345678)"
                           autocomplete="username">
                    <small class="form-hint">We'll send a password reset link to your INTI student email</small>
                </div>
                
                <button type="submit" class="login-btn">Send Reset Link</button>
                
                <div class="form-footer">
                    <p class="register-link">
                        Remember your password? <a href="index.html">Back to Login</a>
                    </p>
                    <p class="register-link">
                        Don't have an account? <a href="register.html">Register here</a>
                    </p>
                </div>
            </form>
            
            <div id="errorMessage" class="error-message"></div>
            <div id="successMessage" class="success-message">
                Password reset email sent successfully! Please check your INTI student email 
                (<span id="emailSent"></span>) and follow the instructions to reset your password.
                <br><br>
                <small>Don't see the email? Check your spam folder or <a href="#" id="resendLink">click here to resend</a>.</small>
            </div>
        </div>
    </div>

    <script src="js/firebase-config.js"></script>
    <script src="js/forgot-password.js"></script>
    
    <!-- Debug script for troubleshooting -->
    <script>
        // Add this temporarily for debugging
        window.addEventListener('load', () => {
            console.log('Firebase available:', typeof firebase !== 'undefined');
            console.log('Firebase Auth available:', typeof firebase.auth !== 'undefined');
            console.log('Current domain:', window.location.origin);
        });
    </script>
</body>
</html>